<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#6d28d9" />
    <title>Poetry Cloud</title>
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div>
        <h1>Poetry Cloud</h1>
        <p class="tagline">A home for your poems — readable by everyone, managed by you.</p>
      </div>
      <div class="topbar-actions">
        <button id="installButton" class="btn" hidden>Install App</button>
        <button id="adminButton" class="btn btn-secondary">Admin Upload</button>
      </div>
    </header>

    <main>
      <section class="controls card">
        <label for="searchInput">Search poems</label>
        <input id="searchInput" type="search" placeholder="Search by title, poem, or tags..." />
        <p id="statusText" class="status">Loading poems…</p>
      </section>

      <section id="poemsGrid" class="poems-grid" aria-live="polite"></section>
    </main>

    <dialog id="adminDialog">
      <form method="dialog" id="adminForm" class="admin-form">
        <h2>Add a New Poem</h2>
        <p class="help">Only you should use this. It writes directly to your GitHub repository.</p>

        <label>GitHub Username
          <input name="owner" required placeholder="your-github-username" />
        </label>

        <label>Repository Name
          <input name="repo" required placeholder="your-repo-name" />
        </label>

        <label>Branch
          <input name="branch" value="main" required />
        </label>

        <label>Path to poems data file
          <input name="path" value="data/poems.json" required />
        </label>

        <label>Personal Access Token (classic)
          <input name="token" type="password" required placeholder="ghp_..." />
        </label>

        <hr />

        <label>Poem Title
          <input name="title" required />
        </label>

        <label>Poem Body
          <textarea name="body" rows="8" required></textarea>
        </label>

        <label>Tags (comma separated)
          <input name="tags" placeholder="love, nature, life" />
        </label>

        <div class="dialog-actions">
          <button value="cancel" class="btn btn-secondary" type="button" id="cancelDialog">Cancel</button>
          <button class="btn" type="submit">Upload Poem</button>
        </div>
        <p id="adminStatus" class="status"></p>
      </form>
    </dialog>

    <template id="poemCardTemplate">
      <article class="poem-card card">
        <h3 class="poem-title"></h3>
        <p class="poem-meta"></p>
        <pre class="poem-body"></pre>
        <p class="poem-tags"></p>
      </article>
    </template>

    <script src="app.js" defer></script>
  </body>
</html>
